<?xml version="1.0" ?>
<openerp>
    <data>
        <!-- add link to the standard footer -->
        <template id="slide_footer" inherit_id="website.footer_default"
            name="Footer Slides Link">
            <xpath expr="//div[@id='info']//ul[@class='list-unstyled']" position="inside">
                <li>
                    <a href="/slides">Presentations</a>
                </li>
            </xpath>
        </template>

        <!-- header template to add scripts to all pages -->
        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Slide">
            <xpath expr="." position="inside">
                <link type="text/less" href="/website_slides/static/src/less/website_slides.less" rel="stylesheet" t-ignore="true"/>
                <script type="text/javascript" src="/website_slides/static/src/js/slides.js"/>
                <link rel="stylesheet" href="/web/static/lib/select2/select2.css"/>
                <link rel="stylesheet" href="/website/static/lib/select2-bootstrap-css/select2-bootstrap.css"/>
                <script type="text/javascript" src="/web/static/lib/select2/select2.js"></script>

            </xpath>
        </template>


        <!-- search box -->
        <template id="search" name="search">
            <form t-attf-action="/slides/#{slug(channel)}/search" role="search" method="get">
                <div class="input-group">
                    <input type="text" class="form-control slide-border-radius" name="query" t-attf-placeholder="Search in #{channel.name}..." t-att-value="query"/>
                    <span class="input-group-btn">
                        <button class="btn btn-primary slide-border-radius" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </span>
                </div>
            </form>
        </template>

        <template id='pdfview' name="pdfview">
            <div class="panel panel-default slide-border-radius">
                <div class="panel-body" style="padding: 0px;">
                    <t t-if="slide.slide_type == 'infographic'">
                        <img t-attf-src="/website/image/slide.slide/#{slide.id}/datas" class="img-responsive" style="width:100%"/>
                    </t>
                    <t t-if="slide.slide_type in ('presentation', 'document')">
                        <div id="PDFViewer" t-attf-slide-id="#{slide.id}" t-attf-downloadable="#{slide.downloadable}"/>
                    </t>
                </div>
            </div>
        </template>

        <template id='media_share' name="Media Share">
            <div class="form-group oe_share">
                <a target="_Blank" class="oe_share_facebook" t-attf-href="https://www.facebook.com/sharer/sharer.php?u=#{slide.share_url}">
                    <i class="fa fa-facebook-square fa-2x"></i>
                </a>
                <a target="_Blank" class="oe_share_twitter" t-attf-href="https://twitter.com/intent/tweet?text=#{slide.name}&amp;url=#{slide.share_url}">
                    <i class="fa fa-twitter-square fa-2x"></i>
                </a>
                <a target="_Blank" class="oe_share_linkedin" t-attf-href="http://www.linkedin.com/shareArticle?mini=true&amp;url=#{slide.share_url}&amp;title=#{slide.name}&amp;">
                    <i class="fa fa-linkedin-square fa-2x"></i>
                </a>
                <a target="_Blank" class="oe_share_google" t-attf-href="https://plus.google.com/share?url=#{slide.share_url}">
                    <i class="fa fa-google-plus-square fa-2x"></i>
                </a>
            </div>
        </template>

        <!-- all share components -->
        <template id='social_share' name="Social Share">
            <h4 class="mt0">Share in social media</h4>
            <t t-call="website_slides.media_share"/>
            <h4 class="mt0">Share Link</h4>
            <input type="text" class="form-control" t-att-value="slide.share_url" readonly="readonly" onClick="this.select();"/>
            <span class="help-block">Use permanent link to share in social media</span>
        </template>

        <template id='send_share_email' name="Email">
            <h4 class="mt0">Share with a friend</h4>
            <t t-if="not is_public_user">
                <form class="form-group" role="form">
                    <div class="input-group col-md-6">
                        <input type="text" class="form-control" placeholder="your-friend@domain.com"/>
                        <span class="input-group-btn">
                            <button class="btn btn-primary send-share-email" data-loading-text="Sending..." type="button"
                                t-attf-slide-id="#{slide.id}"
                                style="border-top-right-radius: 4px;border-bottom-right-radius: 4px;">
                                <i class="fa fa-envelope-o"></i>
                                Send Email
                            </button>
                        </span>
                    </div>
                    <span class="help-block">Send presentation through email</span>
                </form>
            </t>
            <t t-if="is_public_user">
                <p>Please <a t-attf-href="/web?redirect=#{request.httprequest.url}"> login </a> to send this <t t-esc="slide.slide_type"/> by email !</p>
            </t>
        </template>

        <template id="embed" name="Embed Code">
            <h4 class="mt0">Embed in your website</h4>
            <div class="form-group">
                <textarea class="form-control slide_embed_code" readonly="readonly" onClick="this.select();"><t t-esc="slide.get_embed_code()"/></textarea>
            </div>
            <div class="form-group" t-if="slide.slide_type in ('presentation', 'document')">
                <div class="input-group col-lg-3 col-md-3 col-sm-6 col-xs-6">
                    <input type="number" value="1" class="form-control embed-page-counter"/>
                </div>
                <span class="help-block">Select page to start with</span>
            </div>
        </template>

        <template id="channel_header" name="Slide Channel Header">
            <section class="slide-box-shadow">
                <div class="container">
                    <div class="row">
                        <div class="pull-left col-md-8 col-sm-12 col-xs-12 mt16 mb8">
                            <h3 class="mt0">
                                <t t-esc="channel.name"/>
                                <t t-if="can_upload and is_public_user">
                                    <a t-attf-href="/web?redirect=#{request.httprequest.url}" title="Upload Presentation" class="btn btn-primary slide-border-radius">
                                        <i class="fa fa-cloud-upload"></i> Upload
                                    </a>
                                </t>
                                <t t-if="can_upload and not is_public_user">
                                    <a class="btn btn-primary upload slide-border-radius" title="Upload Presentation" t-attf-channel_id="#{channel.id}">
                                        <i class="fa fa-cloud-upload"></i> Upload
                                    </a>
                                </t>
                            </h3>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12 pul-right mt16 mb8">
                            <t t-call="website_slides.search"/>
                        </div>
                        <div class="col-md-6 col-sm-12 col-xs-12">
                            <ul class="nav nav-tabs nav-tabs-border">
                                <li t-attf-class="slide-tabs-li #{not slide_type and 'active' ''}">
                                    <a  t-attf-href="/slides/#{slug(channel)}" class="slide-tabs"> <i class="fa fa-home"></i> Home</a>
                                </li>
                                <li t-if="channel.nbr_presentations" t-attf-class="slide-tabs-li #{slide_type == 'presentation' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/presentation" class="slide-tabs">
                                        <span class="badge">
                                            <t t-esc="channel.nbr_presentations"/>
                                        </span> Presentations
                                    </a>
                                </li>
                                <li t-if="channel.nbr_videos" t-attf-class="slide-tabs-li #{slide_type == 'video' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/video" class="slide-tabs">
                                        <span class="badge">
                                            <t t-esc="channel.nbr_videos"/>
                                        </span> Videos
                                    </a>
                                </li>
                                <li t-if="channel.nbr_documents" t-attf-class="slide-tabs-li #{slide_type == 'document' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/document" class="slide-tabs">
                                        <span class="badge">
                                            <t t-esc="channel.nbr_documents"/>
                                        </span> Documents
                                    </a>
                                </li>
                                <li t-if="channel.nbr_infographics" t-attf-class="slide-tabs-li #{slide_type == 'infographic' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/infographic" class="slide-tabs">
                                        <span class="badge">
                                            <t t-esc="channel.nbr_infographics"/>
                                        </span> Infographics
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6 col-sm-12 col-xs-12">
                            <span class="pull-right">
                                <span class="text-muted">Sort By:</span>
                                <a href="?sorting=date" class="slides-href">
                                    <span t-attf-style="#{sorting and sorting == 'date' and 'font-weight:bold;' ''}">Newest</span>
                                </a>
                                <span class="text-muted">|</span>
                                <a href="?sorting=view" class="slides-href">
                                    <span t-attf-style="#{sorting and sorting == 'view' and 'font-weight:bold;' ''}">Most Viewed</span>
                                </a>
                                <span class="text-muted">|</span>
                                <a href="?sorting=vote" class="slides-href">
                                    <span t-attf-style="#{sorting and sorting == 'vote' and 'font-weight:bold;' ''}">Most Voted</span>
                                </a>
                            </span>
                        </div>
                    </div>
                </div>
            </section>
        </template>

        <template id="categoryheader" name="Slide Category Header">
            <section class="slide-box-shadow">
                <div class="container">
                    <div class="row">
                        <div class="pull-left col-md-8 col-sm-12 col-xs-12 mt16 mb8">
                            <h3 class="mt0">
                                <a t-attf-href="/slides/#{slug(channel)}"><t t-esc="channel.name"/></a>
                                <t t-if="category">/ <t t-esc="category.name"/></t>
                                <t t-if="can_upload and is_public_user">
                                    <a t-attf-href="/web?redirect=#{request.httprequest.url}" title="Upload Presentation" class="btn btn-primary slide-border-radius">
                                        <i class="fa fa-cloud-upload"></i> Upload
                                    </a>
                                </t>
                                <t t-if="can_upload and not is_public_user">
                                    <a class="btn btn-primary upload slide-border-radius" title="Upload Presentation" t-attf-channel_id="#{channel.id}">
                                        <i class="fa fa-cloud-upload"></i> Upload
                                    </a>
                                </t>
                            </h3>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12 pul-right mt16 mb8">
                            <t t-call="website_slides.search"/>
                        </div>
                        <div class="col-md-8 col-sm-12 col-xs-12">
                            <ul class="nav nav-tabs nav-tabs-border">
                                <li t-attf-class="slide-tabs-li #{not slide_type and 'active' ''}">
                                    <a  t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}" class="slide-tabs"> <i class="fa fa-home"></i> Home</a>
                                </li>
                                <li t-if="category.nbr_presentations" t-attf-class="slide-tabs-li #{slide_type == 'presentation' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/presentation" class="slide-tabs">
                                        <span class="badge"><t t-esc="category.nbr_presentations"/></span>
                                        Presentations
                                    </a>
                                </li>
                                <li t-if="category.nbr_videos" t-attf-class="slide-tabs-li #{slide_type == 'video' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/video" class="slide-tabs">
                                        <span class="badge"><t t-esc="category.nbr_videos"/></span>
                                        Videos
                                    </a>
                                </li>
                                <li t-if="category.nbr_documents" t-attf-class="slide-tabs-li #{slide_type == 'document' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/document" class="slide-tabs">
                                        <span class="badge"><t t-esc="category.nbr_documents"/></span>
                                        Documents
                                    </a>
                                </li>
                                <li t-if="category.nbr_infographics" t-attf-class="slide-tabs-li #{slide_type == 'infographic' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/infographic" class="slide-tabs">
                                        <span class="badge"><t t-esc="category.nbr_infographics"/></span>
                                        Infographics
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <span class="pull-right">
                                <span class="text-muted">Sort By:</span>
                                <a href="?sorting=date" class="slides-href">
                                    <span t-attf-style="#{sorting and sorting == 'date' and 'font-weight:bold;' ''}">Newest</span>
                                </a>
                                <span class="text-muted">|</span>
                                <a href="?sorting=view" class="slides-href">
                                    <span t-attf-style="#{sorting and sorting == 'view' and 'font-weight:bold;' ''}">Most Viewed</span>
                                </a>
                                <span class="text-muted">|</span>
                                <a href="?sorting=vote" class="slides-href">
                                    <span t-attf-style="#{sorting and sorting == 'vote' and 'font-weight:bold;' ''}">Most Voted</span>
                                </a>
                            </span>
                        </div>
                    </div>
                </div>
            </section>
        </template>

        <template id="slidelabel" name="Slide Label">
            <span t-if="slide.channel_id.promote_strategy == 'latest'" class="label label-slide label-primary" style="position: absolute;right: 20px;top: 7px;">
                Latest Published
            </span>
            <span t-if="slide.channel_id.promote_strategy == 'mostview'" class="label label-slide label-primary" style="position: absolute;right: 20px;top: 7px;">
                Most Viewed
            </span>
            <span t-if="slide.channel_id.promote_strategy == 'custom'" class="label label-slide label-primary" style="position: absolute;right: 20px;top: 7px;">
                Featured Presentation
            </span>
            <span t-if="slide.channel_id.promote_strategy == 'mostvoted'" class="label label-slide label-primary" style="position: absolute;right: 20px;top: 7px;">
                Most Popular
            </span>
        </template>


        <template id='home' name="Odoo Slides">
            <t t-set="head">
                <script type="text/javascript" src="/website_slides/static/lib/pdfjs/build/pdf.js"></script>
            </t>
            <t t-call="website.layout">
                <div class="wrap">
                    <t t-set="main_object" t-value="channel"/>
                    <t t-if="not category">
                        <t t-call="website_slides.channel_header"/>
                    </t>
                    <t t-if="category">
                        <t t-call="website_slides.categoryheader"/>
                    </t>

                    <section t-if="not famous and not tag and not slide_type and not search and not is_public_user and not category" class="wrap mt16 mb0">
                        <div class="container">
                            <div class="alert alert-danger alert-dismissable mb0 slide-border-radius">
                                <p>
                                    Review your channel settings to promote your most viewed or recent published presentation
                                </p>
                                <a t-attf-href="/web#return_label=Website&amp;id=#{channel.id}&amp;view_type=form&amp;model=slide.channel" class="fa fa-arrow-right mt8">
                                    Channel Setting
                                </a>
                            </div>
                        </div>
                    </section>
                    <section class="slide-promote-box" t-if="famous and not tag and not slide_type and not search and not category">
                        <div class="container">
                            <div class="row">
                                <div>
                                    <div class="col-md-5 mt16 mb16">
                                        <a t-attf-href="/slides/detail_view/#{slug(famous)}">
                                            <span class="slide-promote-image">
                                                <img t-attf-src="/website/image/slide.slide/#{famous.id}/image" class="img-responsive shadow slide-width"/>
                                                <t t-call="website_slides.slidelabel">
                                                    <t t-set="slide" t-value="famous"/>
                                                </t>
                                            </span>
                                        </a>
                                    </div>
                                    <div class="col-md-7 mt16">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pl0">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pl0">
                                                <p class="oe-slides-text-truncation h3 mt0 mb0 slide-pl0">
                                                    <a t-attf-href="/slides/detail_view/#{slug(famous)}">
                                                        <t t-esc="famous.name"/>
                                                    </a>
                                                </p>
                                                <div class="mt8 mb8 col-md-16 slide-pl0" t-if="famous.tag_ids">
                                                    <t t-foreach="famous.tag_ids" t-as="att_tag">
                                                        <a class="slides-href" t-attf-href="/slides/#{slug(channel)}/tag/#{slug(att_tag)}">
                                                            <span t-attf-class="label label-default #{tag and tag.name == att_tag.name and 'label-primary' ''}" t-field="att_tag.name"/>
                                                        </a>
                                                    </t>
                                                </div>
                                                <p t-if="famous.description"><t t-raw="'&lt;br/&gt;'.join(famous.description.split('\n')[0:10])"/></p>

                                                <b>Share:</b>
                                                <t t-call="website_slides.media_share">
                                                    <t t-set="slide" t-value="famous"/>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <div class="container mt16">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-left: 15px;padding-right: 15px;" t-if="channel.total == 0">
                                    <div class="jumbotron slide-border-top slide-border-radius">
                                        <h1>No presentation published yet.</h1>
                                        <p>
                                            The <i><t t-esc="channel.name"/></i> is empty.
                                            <span t-if="can_upload">
                                                Upload PDF presentations, documents, videos or infographic using the button below.
                                            </span>
                                        </p>
                                        <p>
                                            <a t-if="can_upload and is_public_user" t-attf-href="/web?redirect=#{request.httprequest.url}" class="btn btn-primary slide-border-radius slide-pading">
                                                <i class="fa fa-cloud-upload"></i> Upload
                                            </a>
                                            <a t-if="can_upload and not is_public_user" class="btn btn-primary upload slide-border-radius slide-pading" t-attf-channel_id="#{channel.id}">
                                                <i class="fa fa-cloud-upload"></i> Upload
                                            </a>
                                        </p>
                                    </div>
                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pr0 slide-pl0" t-if="slide_type or category or tag">
                                    <t t-call="website_slides.gridview"/>
                                </div>
                                <div class="row text-center" t-if="slide_type or category or tag">
                                    <t t-call="website.pager"/>
                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb16 slide-pl0 slide-pr0" t-if="not slide_type and category_datas and not tag">
                                    <t t-foreach="category_datas" t-as="category">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt8 slide-pl0 slide-pr0 slide-border-color">
                                                <a t-if="category['id']" t-attf-href="/slides/#{slug(channel)}/category/#{category['id']}" class="h3 mt0 mb0">
                                                    <t t-esc="category['name']"/>
                                                </a>
                                                <span t-if="not category['id']" title="Uncategorized presentation" class="h3 mt0 mb0">
                                                    <t t-esc="category['name']"/>
                                                </span>
                                                <a t-attf-href="/slides/#{slug(channel)}/category/#{category['id']}" class="pull-right" t-if="category['total'] - 4 > 0 and category['id']">
                                                    <i class="fa fa-arrow-right"></i> See all
                                                </a>
                                            </div>
                                        </div>
                                        <t t-call="website_slides.gridview">
                                            <t t-set="slides" t-value="category['slides']"/>
                                        </t>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>

        <!-- slide grid view -->
        <template id='gridview' name="Slides">
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 slide-collection" t-foreach="slides" t-as="slide">
                <div t-attf-class="oe-grid-thumbnail">
                    <a t-attf-href="/slides/detail_view/#{slug(slide)}">
                        <span t-attf-class="oe-image-thumbnail">
                            <img t-attf-src="/website/image/slide.slide/#{slide.id}/image_thumb" class="img-responsive slide-width"/>
                        </span>
                    </a>
                    <span t-if="not slide.website_published" class="label label-danger" style="position: absolute;right: 20px;top: 7px;">Not Published</span>
                    <a t-if="not is_public_user and slide.website_published and slide.channel_id.promote_strategy == 'custom' and slide.channel_id.promoted_slide_id.id != slide.id"
                        class="slide-cursor" t-attf-href="/slides/promote/#{slide.id}"
                        style="position: absolute;right: 20px;top: 7px;"
                        t-attf-title="Promote this #{slide.slide_type}">
                        <span class="fa-stack fa-lg">
                          <i class="fa fa-square fa-stack-2x slide-opacity"></i>
                          <i class="fa fa-bullhorn fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>

                    <div style="padding: 5px;">
                        <a t-att-title="slide.name" t-attf-href="/slides/detail_view/#{slug(slide)}">
                            <p class="oe-slides-text-truncation h4 mt4 mb8">
                                <t t-esc="slide.name"/>
                            </p>
                        </a>
                        <div class="text-muted">
                            <small class="pull-left">
                                <t t-esc="slide.total_views" />
                                Views
                            </small>
                            <small class="pull-right">
                                <timeago class="timeago" t-att-datetime="slide.create_date"></timeago>
                            </small>
                        </div>
                        <p t-if="slide.tag_ids" class="oe-slides-text-truncation" style="padding-top: 5px;">
                            <t t-foreach="slide.tag_ids" t-as="att_tag">
                                <a class="slides-href" t-attf-href="/slides/#{slug(channel)}/tag/#{slug(att_tag)}">
                                    <span t-attf-class="label label-default #{tag and tag.name == att_tag.name and 'label-primary' ''}" t-field="att_tag.name"/>
                                </a>
                            </t>
                        </p>
                    </div>
                </div>
            </div>
        </template>

        <template id="related_slides" name="Related Slide">
            <li class="media slide-container">
                <a class="pull-left" t-attf-href="/slides/detail_view/#{slug(relatedslide)}">
                    <span class="slide-small-box">
                        <img class="media-object img-responsive" t-attf-src="/website/image/slide.slide/#{relatedslide.id}/image_thumb"/>
                    </span>
                </a>
                <div class="media-heading">
                    <div class="text-truncation" t-att-title="relatedslide.name">
                        <t t-esc="relatedslide.name"/>
                    </div>
                    <small class="text-muted">
                        <div class="pull-left"><t t-esc="relatedslide.total_views"/> Views</div><br/>
                        <div class="pull-left"><timeago class="timeago" t-att-datetime="relatedslide.create_date"></timeago></div>
                    </small>
                </div>
            </li>
        </template>

        <template id="mostviewed_slides" name="Mostviewed Slide">
            <li class="media slide-container">
                <a class="pull-left" t-attf-href="/slides/detail_view/#{slug(slide)}">
                    <span class="slide-small-box">
                        <img class="media-object img-responsive" t-attf-src="/website/image/slide.slide/#{slide.id}/image_thumb"/>
                    </span>
                </a>
                <div class="media-heading">
                    <div class="text-truncation" t-att-title="slide.name">
                        <t t-esc="slide.name"/>
                    </div>
                    <small class="text-muted">
                        <div class="pull-left"><t t-esc="slide.total_views"/> Views</div><br/>
                        <div class="pull-left"><timeago class="timeago" t-att-datetime="slide.create_date"></timeago></div>
                    </small>
                </div>
            </li>
        </template>

        <!-- slide detail view -->
        <template id="detail_view" name="Slide Detail">
            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                <div t-if="not private">
                    <t t-if="slide.datas">
                        <t t-call="website_slides.pdfview">
                            <t t-set="slide" t-value="slide"/>
                        </t>
                    </t>
                    <div t-if="slide.slide_type == 'video' and slide.document_id" class="embed-responsive embed-responsive-16by9 embed-responsive-item mb8">
                        <t t-raw="slide.get_embed_code()"/>
                    </div>
                </div>

                <div t-if="private" style="position: inherit;" class="mb16">
                    <div class="slide-private-view">

                        <h3 style="border-bottom: 1px solid !important;padding-bottom: 10px;">
                            <i class="fa fa-exclamation-triangle"></i>
                            This <t t-esc="private_slide.slide_type"/> is private.
                        </h3>
                        <div t-field="private_slide.channel_id.access_error_msg"/>
                    </div>
                </div>

                <t t-if="not private">
                    <div>
                        <div class="pull-right">
                            <span>
                                <t t-call="website.publish_management">
                                    <t t-set="object" t-value="slide"/>
                                    <t t-set="publish_edit" t-value="True"/>
                                </t>
                            </span>
                            <span class="slide-pl0" t-if="slide.tag_ids">
                                <t t-foreach="slide.tag_ids" t-as="att_tag">
                                    <a class="slides-href" t-attf-href="/slides/#{slug(channel)}/tag/#{slug(att_tag)}">
                                        <span t-attf-class="label label-default #{tag and tag.name == att_tag.name and 'label-primary' ''}" t-field="att_tag.name"/>
                                    </a>
                                </t>
                            </span>
                        </div>
                        <div class="oe-slides-title-truncation h3 mb8 mt0" t-att-title="slide and slide.name" t-esc="slide and slide.name"/>
                    </div>
                    <div class="row">
                        <div class="col-sm-8 col-xs-12">
                            <div class="pull-left">
                                <a t-attf-href="/slides/#{slug(channel)}">
                                    <i class="fa fa-circle-o fa-5x" style="color: #a24689;font-weight: bold;"></i>
                                </a>
                            </div>
                            <div style="margin-left: 80px">
                                <p>
                                    <a t-attf-href="/slides/#{slug(channel)}" t-esc="channel.name"/>
                                    <t t-if="slide and slide.category_id">
                                        <span> / </span>
                                        <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(slide.category_id)}" t-esc="slide.category_id.name"/>
                                    </t>
                                </p>
                                <div class="mt0">
                                    <t t-call="website_mail.follow">
                                        <t t-set="email" t-value="user.email"/>
                                        <t t-set="object" t-value="channel"/>
                                    </t>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 hidden-xs">
                            <div class="text-right">
                                <b class="h3 text-muted"><t t-esc="slide.total_views"/></b> <span class="text-muted small">views</span>
                            </div>
                            <div class="progress mb0" style="height: 2px;" t-if="slide.likes + slide.dislikes > 0">
                                <div class="progress-bar" role="progressbar" t-attf-aria-valuenow="#{slide.likes}" aria-valuemin="0"
                                    t-attf-aria-valuemax="#{slide.likes + slide.dislikes}"
                                    t-attf-style="width: #{(slide.likes*100)/(slide.likes + slide.dislikes)}%;">
                                    <span class="sr-only"><t t-esc="slide.likes"/> Likes</span>
                                </div>
                            </div>
                            <div class="progress mb0" style="height: 2px;" t-if="slide.likes + slide.dislikes == 0">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                                    <span class="sr-only"><t t-esc="slide.likes"/> Likes</span>
                                </div>
                            </div>
                            <div class="text-muted mt4">
                                <div class="pull-right mb16 text-right slide-pr0">
                                    <a id="like" t-att-user-id="user.id" t-att-slide-id="slide.id" class="slide-like text-muted"
                                        data-count-el='.count-likes' t-attf-data-href="/slides/like/#{slug(slide)}">
                                        <span class="fa fa-thumbs-up fa-1x count-likes"><t t-esc="slide.likes"/>
                                        </span>
                                    </a> Like
                                    <a id="unlike" t-att-user-id="user.id" t-att-slide-id="slide.id"
                                        class="slide-unlike text-muted" data-count-el=".count-dislikes"
                                        t-attf-data-href="/slides/dislike/#{slug(slide)}">
                                        <i class="fa fa-thumbs-down fa-1x count-dislikes"><t t-esc="slide.dislikes"/></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt8 mb32">
                        <ul class="nav nav-tabs" role="tablist">
                            <li t-att-class="not comments and 'slide-tabs-li active' or 'slide-tabs-li'">
                                <a href="#about" role="tab" data-toggle="tab" class="slide-tabs">
                                    <i class="fa fa-home"></i> About
                                </a>
                            </li>
                            <li class="slide-tabs-li">
                                <a href="#share" role="tab" data-toggle="tab" class="slide-tabs">
                                    <i class="fa fa-share-alt"></i> Share
                                </a>
                            </li>
                            <li t-att-class="comments and 'slide-tabs-li active' or 'slide-tabs-li'">
                                <a href="#discuss" role="tab" data-toggle="tab" class="slide-tabs">
                                    <i class="fa fa-comments-o"></i> Comments
                                </a>
                            </li>
                            <li class="slide-tabs-li">
                                <a href="#transcript" role="tab" data-toggle="tab" class="slide-tabs">
                                    <i class="fa fa-align-justify"></i> Transcript
                                </a>
                            </li>
                            <li class="slide-tabs-li">
                                <a href="#statistic" role="tab" data-toggle="tab" class="slide-tabs">
                                    <i class="fa fa-bar-chart"></i> Statistic
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content" style="padding: 20px 5px 5px 5px; word-wrap: break-word;">
                            <div t-att-class="not comments and 'tab-pane fade in active' or 'tab-pane fade'" id="about">
                                <div t-field="slide.description"/>
                            </div>
                            <div class="tab-pane fade" id="share">
                                <t t-call="website_slides.social_share">
                                    <t t-set="slide" t-value="slide"/>
                                </t>
                                <t t-call="website_slides.send_share_email">
                                    <t t-set="slide" t-value="slide"/>
                                </t>
                                <t t-if="not slide.document_id">
                                    <t t-call="website_slides.embed">
                                        <t t-set="slide" t-value="slide"/>
                                    </t>
                                </t>
                            </div>
                            <div t-att-class="comments and 'tab-pane fade in active' or 'tab-pane fade'" id="discuss">
                                <form id="comment" t-attf-action="/slides/comment/#{slide.id}" method="POST">
                                    <div class="media">
                                        <span class="pull-left">
                                            <img class="img img-circle media-object"
                                                t-att-src="'/website/image?model=res.partner&amp;field=image_small&amp;id='+str(user_id.partner_id.id)"
                                                style="width: 30px"/>
                                        </span>
                                        <div class="media-body">
                                            <div t-if="is_public_user" class="col-md-6 slide-pl0">
                                                <input type="name" class="form-control mb8" name="name" placeholder="Your Name"/>
                                                <input type="email" class="form-control mb8" name="email" placeholder="Email Address"/>
                                            </div>
                                            <div t-if="is_public_user" class="col-md-6 slide-pl0">
                                                <p class="text-muted small">
                                                    Post comment with email address (confirmation of email is required in order to publish comment on website) or please
                                                    <a t-attf-href="/web?redirect=#{request.httprequest.url}">login</a>
                                                    to post comment
                                                </p>
                                            </div>
                                            <textarea rows="3" name="comment" class="form-control" placeholder="Write a comment..."></textarea>
                                            <button type="submit" class="btn btn-primary mt8">Post</button>
                                        </div>

                                    </div>
                                </form>
                                <ul class="media-list mt8">
                                    <li t-foreach="comments" t-as="message" class="media">
                                        <span class="pull-left">
                                            <img class="media-object img img-circle"
                                                t-att-src="'/website/image?model=mail.message&amp;field=author_avatar&amp;id='+str(message.id)" style="width: 30px"/>
                                        </span>
                                        <div class="media-body">
                                            <t t-call="website.publish_short">
                                                <t t-set="object" t-value="message"/>
                                            </t>
                                            <span t-field="message.author_id" style="display: inline-block;" t-field-options='{"widget": "contact", "fields": ["name"]}'/>
                                            <span class="text-muted">on<span t-field="message.date"/></span>
                                            <div t-field="message.body" class="discussion_scroll_post"></div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="tab-pane fade" id="transcript">
                                <t t-if="slide.index_content">
                                    <t t-foreach="slide.index_content.split('\n')" t-as="line">
                                        <p t-esc="line"></p>
                                    </t>
                                </t>
                            </div>
                            <div class="tab-pane fade" id="statistic">
                                <div class="row">
                                    <div class="col-md-4">
                                        <h4 class="mt0 slide-statics-title">Views</h4>
                                        <ul class="list-group">
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge"><t t-esc="slide.total_views"/></span>
                                                <i class="fa fa-play"></i> Total Views
                                            </li>
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge"><t t-esc="slide.slide_views"/></span>
                                                <i class="fa fa-circle-o"></i> Website Views
                                            </li>
                                            <li class="list-group-item slide-statics-item" t-if="not slide.document_id">
                                                <span class="badge"><t t-esc="slide.embed_views"/></span>
                                                <i class="fa fa-code"></i> Embeded Views
                                            </li>
                                            <li class="list-group-item slide-statics-item" t-if="slide.document_id">
                                                <span class="badge"><t t-esc="slide.youtube_views"/></span>
                                                <i class="fa fa-youtube-square"></i> Views on Youtube
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-md-4">
                                        <h4 class="mt0 slide-statics-title">Actions</h4>
                                        <ul class="list-group">
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge" id="total-share">0</span>
                                                <i class="fa fa-share-alt"></i> Social Shares
                                            </li>
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge"><t t-esc="slide.likes"/></span>
                                                <i class="fa fa-thumbs-up"></i> Likes
                                            </li>
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge"><t t-esc="slide.dislikes"/></span>
                                                <i class="fa fa-thumbs-down"></i> Dislikes
                                            </li>
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge"><t t-esc="len(slide.message_ids) - 1"/></span>
                                                <i class="fa fa-comments-o"></i> Comments
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-md-4">
                                        <h4 class="mt0 slide-statics-title">Share count</h4>
                                        <ul class="list-group">
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge" id="facebook-badge">0</span>
                                                <i class="fa fa-facebook-square"></i> Facebook
                                            </li>
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge" id="twitter-badge">0</span>
                                                <i class="fa fa-twitter-square"></i> Twitter
                                            </li>
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge" id="linkedin-badge">0</span>
                                                <i class="fa fa-linkedin-square"></i> Linkedin
                                            </li>
                                            <li class="list-group-item slide-statics-item">
                                                <span class="badge" id="google-badge">0</span>
                                                <i class="fa fa-google-plus-square"></i> Google+
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="row" t-if="not slide.document_id and slide.embed_views">
                                    <div class="col-md-12">
                                        <h4 class="mt0 slide-statics-title"> Embeds
                                            <span class="badge pull-right">
                                                <t t-esc="len(slide.embedcount_ids)"/>
                                            </span>
                                        </h4>
                                        <ul class="list-group" style="height: 150px;overflow: auto;">
                                            <li class="list-group-item slide-statics-item" t-foreach="slide.embedcount_ids" t-as="count">
                                                <span class="badge"><t t-esc="count.count_views"/></span>
                                                <t t-esc="count.url"/>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="#related" data-toggle="tab">Related</a></li>
                    <li><a href="#most_viewed" data-toggle="tab">Most Viewed</a></li>
                </ul>
                <div class="tab-content">
                    <div id="related" class="tab-pane active">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-box mb16">
                            <ul class="media-list">
                                <t t-foreach="related_slides" t-as="relatedslide">
                                    <t t-call="website_slides.related_slides"/>
                                </t>
                            </ul>
                        </div>
                    </div>
                    <div id="most_viewed" class="tab-pane">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-box mb16">
                            <ul class="media-list">
                                <t t-foreach="most_viewed_slides" t-as="slide">
                                    <t t-call="website_slides.mostviewed_slides"/>
                                </t>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!-- display one slide -->
        <template id='slide_detail_view' name="Odoo Slide">
            <t t-set="head">
                <t t-if="not private">
                    <meta property="og:title" t-att-content="slide.name" />
                    <meta property="og:type" content="website" />
                    <meta property="og:url" t-att-content="slide.share_url" />
                    <meta property="og:image" t-attf-content="#{request.httprequest.host_url}/website/image/slide.slide/#{slide.id}/image_thumb"/>
                    <meta property="og:description" t-att-content="slide.description" />
                </t>
                <script type="text/javascript" src="/website_slides/static/lib/pdfjs/build/pdf.js"></script>
            </t>
            <t t-call="website.layout">
                <t t-set="main_object" t-value="slide"/>
                <div class="container mt16">
                    <div class="row">
                        <t t-call="website_slides.detail_view"/>
                    </div>
                </div>
            </t>
        </template>

        <!-- channel list, will be display if more then one channel available -->
        <template id="channels" name="Channels">
            <t t-call="website.layout">
                <div class="container mt16">
                    <h1>Select a Channel</h1>
                    <div class="row">
                        <div t-foreach="channels" t-as="channel" class="col-sm-4 mb32">
                            <t t-set="famous" t-value="channel.get_promoted_slide()"/>
                            <div class="oe-channel-grid-thumbnail">
                                <a t-attf-href="/slides/#{slug(channel)}" t-if="famous">
                                    <span class="channel-box">
                                        <img t-attf-src="/website/image/slide.slide/#{famous.id}/image_medium" class="img-responsive slide-width"/>
                                    </span>
                                </a>
                                <a t-attf-href="/slides/#{slug(channel)}" t-if="not famous">
                                    <span class="channel-box">
                                        <img src="/website_slides/static/description/channel-default.jpg" class="img-responsive slide-width slide-opacity"/>
                                    </span>
                                </a>
                                <div style="padding: 10px;">
                                    <a t-attf-href="/slides/#{slug(channel)}">
                                        <h3 class="oe-slides-title-truncation mt4 mb4 lead" t-att-title="channel.name" style="width:55%">
                                            <t t-esc="channel.name"/>
                                        </h3>
                                    </a>
                                    <div class="mt4 pull-right">
                                        <t t-call="website.publish_management">
                                            <t t-set="object" t-value="channel"/>
                                            <t t-set="publish_edit" t-value="True"/>
                                        </t>
                                    </div>
                                    <p t-field="channel.description"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <template id="channel_not_found" name="Private Presentation">
            <t t-call="website.layout">
                <div class="container">
                    <div class="oe_structure">
                        <h2>No channel created or published yet.</h2>
                    </div>
                </div>
            </t>
        </template>


        <template id="opt_subscription_on_channels" name="Subscription" customize_show="True" inherit_id="website_slides.channels">
            <xpath expr="//p[@t-field='channel.description']" position="after">
                <t t-call="website_mail.follow">
                    <t t-set="email" t-value="user.email"/>
                    <t t-set="object" t-value="channel"/>
                </t>
            </xpath>
        </template>


        <!-- entry page of the slide application -->
        <template id='search_result' name="Odoo Slide Search">
            <t t-call="website.layout">
                <div class="wrap">
                    <section class="slide-box-shadow">
                        <div class="container">
                            <div class="row slide-pr0 slide-pl0 mt16 mb16">
                                <div class="col-md-8 pull-left">
                                    <h3 class="mt0">
                                        Searching in <a t-attf-href="/slides/#{slug(channel)}"><t t-esc="channel.name"/></a>
                                    </h3>
                                </div>
                                <div class="col-md-4 pull-right">
                                    <t t-call="website_slides.search"/>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section>
                        <div class="container mt16" t-if="not slides">
                            <div class="alert alert-danger" role="alert">
                                Sorry , but nothing matched your search criteria <b><t t-esc="query"/></b>. Please try again with some different keywords.
                            </div>
                        </div>
                        <div class="container mt16" t-if="slides">
                            <div class="alert alert-success mb0" role="alert">
                                <b t-esc="len(slides)"/> results found, for the given criteria <b><t t-esc="query"/></b>
                            </div>
                            <div class="row slide-pr0 slide-pl0 mt0">
                                <t t-call="website_slides.gridview"/>
                            </div>
                            <div class="row text-center">
                                <t t-call="website.pager"/>
                            </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>
    </data>
</openerp>
